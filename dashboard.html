<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Interactive SaaS Dashboard</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',sans-serif;}
body{display:flex;min-height:100vh;background:#f4f6f8;color:#1e293b;transition:0.3s;}
body.dark{background:#1e2937;color:#f4f6f8;}
.sidebar{width:260px;background:#1e293b;color:white;flex-shrink:0;display:flex;flex-direction:column;transition:width 0.3s;}
.sidebar.collapsed{width:70px;}
.sidebar .brand{padding:2rem;font-size:1.8rem;font-weight:bold;text-align:center;background:#111827;}
.sidebar ul{list-style:none;flex:1;}
.sidebar li{padding:1.2rem 1.8rem;cursor:pointer;display:flex;align-items:center;gap:1rem;transition:0.2s;}
.sidebar li:hover,.sidebar li.active{background:#374151;}
.sidebar li i{min-width:20px;text-align:center;}
.sidebar li .label{white-space: nowrap;overflow:hidden;text-overflow:ellipsis;}
.topbar{height:65px;background:white;display:flex;align-items:center;justify-content:space-between;padding:0 2rem;box-shadow:0 2px 5px rgba(0,0,0,0.1);position: sticky;top:0; z-index:50;transition:0.3s;}
.topbar.dark{background:#111827;color:white;}
.topbar-left{display:flex;align-items:center;gap:1rem;}
.topbar-right{display:flex;align-items:center;gap:1rem;}
.main{flex:1;display:flex;flex-direction:column;}
.content{padding:2rem;flex:1;overflow-y:auto;}
.cards{display:grid;grid-template-columns: repeat(auto-fit,minmax(260px,1fr));gap:1rem;margin-bottom:2rem;}
.card{background:white;padding:1rem;border-radius:12px;box-shadow:0 3px 10px rgba(0,0,0,0.08);transition: transform 0.2s;position:relative;}
.card:hover{transform: translateY(-4px);}
.card h3{font-size:1rem;color:#64748b;margin-bottom:0.5rem;}
.card p{font-size:1.1rem;font-weight:bold;color:#1e40af;margin-bottom:0.5rem;}
.card canvas{width:100%!important;height:60px!important;}
.card.dark{background:#1f2937;color:white;}
.progress-bar{background:#e2e8f0;height:10px;border-radius:8px;overflow:hidden;margin-top:0.5rem;}
.progress-fill{height:100%;background:#3b82f6;border-radius:8px;}
table{width:100%;border-collapse:collapse;background:white;border-radius:12px;overflow:hidden;box-shadow:0 3px 10px rgba(0,0,0,0.05);}
table.dark{background:#1f2937;color:white;}
th, td{padding:0.75rem 1rem;text-align:left;border-bottom:1px solid #e2e8f0;font-size:0.9rem;}
th{background:#f1f5f9;font-weight:600;color:#1e293b;}
th.dark{background:#111827;color:white;}
.btn{padding:0.45rem 0.9rem;border:none;border-radius:6px;cursor:pointer;background:#3b82f6;color:white;font-weight:600;transition:0.3s;font-size:0.9rem;}
.btn:hover{background:#2563eb;}
.switch{position:relative;display:inline-block;width:50px;height:26px;}
.switch input{opacity:0;width:0;height:0;}
.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background:#ccc;transition:0.4s;border-radius:26px;}
.slider:before{position:absolute;content:"";height:22px;width:22px;left:2px;bottom:2px;background:white;transition:0.4s;border-radius:50%;}
input:checked + .slider{background:#3b82f6;}
input:checked + .slider:before{transform:translateX(24px);}
input, select{padding:0.45rem 0.75rem;border-radius:6px;border:1px solid #cbd5e1;outline:none;font-size:0.9rem;margin-top:0.5rem;width:100%;}
input:focus, select:focus{border-color:#3b82f6;box-shadow:0 0 0 2px rgba(59,130,246,0.2);}
.chart{background:white;border-radius:12px;padding:1rem;height:120px;display:flex;align-items:center;justify-content:center;color:#64748b;box-shadow:0 3px 10px rgba(0,0,0,0.05);margin-bottom:1rem;}
.chart.dark{background:#1f2937;color:white;}
.modal{display:none;position:fixed;z-index:200;left:0;top:0;width:100%;height:100%;overflow:auto;background:rgba(0,0,0,0.5);}
.modal-content{background:white;margin:8% auto;padding:2rem;border-radius:12px;width:90%;max-width:600px;}
.modal-content.dark{background:#1f2937;color:white;}
.close{float:right;font-size:1.5rem;cursor:pointer;}
.tooltip{position:relative;display:inline-block;}
.tooltip .tooltiptext{visibility:hidden;width:140px;background:#111827;color:#fff;text-align:center;border-radius:6px;padding:5px 0;position:absolute;z-index:1;bottom:125%;left:50%;transform:translateX(-50%);opacity:0;transition:opacity 0.3s;}
.tooltip:hover .tooltiptext{visibility:visible;opacity:1;}
.filter-container{margin-bottom:1rem;display:flex;gap:1rem;flex-wrap:wrap;}
@media(max-width:768px){.sidebar{position:absolute;left:-260px;top:0;height:100%;z-index:100;transition:0.3s;}.sidebar.show{left:0;}}
</style>
</head>
<body>

<div class="sidebar" id="sidebar">
    <div class="brand">ProDash</div>
    <ul>
        <li class="active" onclick="showPage('overview', this)"><i>üè†</i> <span class="label">Overview</span></li>
        <li onclick="showPage('analytics', this)"><i>üìä</i> <span class="label">Analytics</span></li>
        <li onclick="showPage('projects', this)"><i>üìÅ</i> <span class="label">Projects</span></li>
        <li onclick="showPage('reports', this)"><i>üìù</i> <span class="label">Reports</span></li>
        <li onclick="showPage('users', this)"><i>üë•</i> <span class="label">Users</span></li>
        <li onclick="showPage('settings', this)"><i>‚öôÔ∏è</i> <span class="label">Settings</span></li>
    </ul>
</div>

<div class="main">
    <div class="topbar" id="topbar">
        <div class="topbar-left">
            <button onclick="toggleSidebar()" class="btn">‚ò∞</button>
            <h3>Pro Dashboard</h3>
        </div>
        <div class="topbar-right">
            <span id="notifBell" class="tooltip" onclick="openModal('notifModal')">üîî
                <span class="tooltiptext">View notifications</span>
            </span>
            <button class="btn" onclick="toggleTheme()">Toggle Theme</button>
        </div>
    </div>

    <div class="content">
        <!-- Overview -->
        <div class="page" id="overview">
            <h2>Overview</h2>
            <div id="overviewContainer" class="cards"></div>
            <button class="btn" onclick="addOverviewCard()">Add Overview Widget</button>
        </div>

        <!-- Analytics -->
        <div class="page" id="analytics" style="display:none;">
            <h2>Analytics</h2>
            <div class="filter-container">
                <select id="filterWeek" onchange="filterAnalytics()">
                    <option value="all">All Weeks</option>
                    <option value="week1">Week 1</option>
                    <option value="week2">Week 2</option>
                    <option value="week3">Week 3</option>
                    <option value="week4">Week 4</option>
                </select>
            </div>
            <div id="analyticsContainer" class="cards"></div>
            <button class="btn" onclick="addAnalyticsCard()">Add Analytics Widget</button>
        </div>

        <!-- Projects -->
        <div class="page" id="projects" style="display:none;">
            <h2>Projects</h2>
            <div id="projectsContainer" class="cards"></div>
            <button class="btn" onclick="addProject()">Add Project</button>
        </div>

        <!-- Reports -->
        <div class="page" id="reports" style="display:none;">
            <h2>Reports</h2>
            <div id="reportsContainer" class="cards"></div>
            <button class="btn" onclick="addReport()">Add Report</button>
        </div>

        <!-- Users -->
        <div class="page" id="users" style="display:none;">
            <h2>Users</h2>
            <div id="usersContainer" class="cards"></div>
            <button class="btn" onclick="addUser()">Add User</button>
        </div>

        <!-- Settings -->
        <div class="page" id="settings" style="display:none;">
            <h2>Settings</h2>
            <div id="settingsContainer" class="cards"></div>
            <button class="btn" onclick="addSettingsCard()">Add Setting</button>
        </div>
    </div>
</div>

<!-- Modals -->
<div id="notifModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal('notifModal')">&times;</span>
        <h3>Notifications</h3>
        <ul id="notifList"></ul>
    </div>
</div>

<div id="editModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal('editModal')">&times;</span>
        <h3>Edit Card</h3>
        <label>Title: <input type="text" id="editTitle"></label>
        <label>Value/Progress: <input type="text" id="editValue"></label>
        <button class="btn" onclick="saveCardEdit()">Save</button>
    </div>
</div>

<script>
// --- Sidebar & Theme ---
function toggleSidebar(){document.getElementById('sidebar').classList.toggle('show');}
function showPage(pageId, el){
    document.querySelectorAll('.page').forEach(p=>p.style.display='none');
    const page = document.getElementById(pageId);
    if (!page) return;
    page.style.display='block';
    document.querySelectorAll('.sidebar li').forEach(li=>li.classList.remove('active'));
    el.classList.add('active');
}
function toggleTheme(){
    document.body.classList.toggle('dark');
    document.querySelectorAll('.topbar, .card, table, .modal-content, th').forEach(el=>el.classList.toggle('dark'));
}
function openModal(id){document.getElementById(id).style.display='block';}
function closeModal(id){document.getElementById(id).style.display='none';}

// --- Notifications ---
let notifications = JSON.parse(localStorage.getItem('notifications')) || ["Welcome to ProDash!"];
const notifList=document.getElementById("notifList");
function renderNotifications(){
    notifList.innerHTML="";
    notifications.forEach(n=>{
        const li=document.createElement("li"); li.textContent=n; notifList.appendChild(li);
    });
    localStorage.setItem('notifications', JSON.stringify(notifications));
}
renderNotifications();
function pushNotification(msg){
    notifications.unshift(msg); 
    if(notifications.length>10) notifications.pop();
    renderNotifications();
}

// --- Edit modal ---
let currentEditCard = null;
function editCard(btn){
    currentEditCard = btn.closest(".card");
    document.getElementById("editTitle").value = currentEditCard.querySelector("h3").innerText;
    let p = currentEditCard.querySelector("p");
    document.getElementById("editValue").value = p ? p.innerText : "";
    openModal('editModal');
}
function saveCardEdit(){
    if(currentEditCard){
        currentEditCard.querySelector("h3").innerText = document.getElementById("editTitle").value;
        let p = currentEditCard.querySelector("p");
        if(p) p.innerText = document.getElementById("editValue").value;
        saveAllData();
        closeModal('editModal');
    }
}

// --- Drag-and-drop ---
function makeSortable(id){
    const container = document.getElementById(id);
    if(container) new Sortable(container, {animation:150, onEnd: saveAllData});
}
['projectsContainer','reportsContainer'].forEach(makeSortable);

// --- Data ---
let overviewData = JSON.parse(localStorage.getItem('overviewData')) || [
    {title:"Total Users", value:"1245", chart:[100,120,130,145]},
    {title:"Revenue", value:"$78k", chart:[50,60,70,78]},
    {title:"Active Projects", value:"32", chart:[5,8,12,15]}
];
let analyticsData = JSON.parse(localStorage.getItem('analyticsData')) || [
    {title:"Traffic", value:"12345", chart:[3000,3200,3500,4000,3450]},
    {title:"Conversion", value:"6.8%", chart:[5.5,6,6.5,7,6.8]},
    {title:"User Growth", value:"270", chart:[200,220,240,260,270]}
];
let projectsData = JSON.parse(localStorage.getItem('projectsData')) || [
    {title:"Project Apollo", value:"80% Complete", chart:[80,82,84,85]},
    {title:"Project Zeus", value:"45% Complete", chart:[40,42,44,45]},
    {title:"Project Hera", value:"60% Complete", chart:[55,57,60,60]}
];
let reportsData = JSON.parse(localStorage.getItem('reportsData')) || [
    {title:"Revenue Report", value:"Owner: John", chart:[70,75,78,78]},
    {title:"Traffic Report", value:"Owner: Lisa", chart:[3000,3200,3400,3450]}
];
let usersData = JSON.parse(localStorage.getItem('usersData')) || [
    {title:"John Doe", value:"Admin", chart:[5,6,6,7]},
    {title:"Jane Smith", value:"Editor", chart:[2,3,3,4]},
    {title:"Lisa Wong", value:"Admin", chart:[6,6,7,7]}
];
let settingsData = JSON.parse(localStorage.getItem('settingsData')) || [
    {title:"Profile", value:"Admin Account", chart:[0,0,0,0]},
    {title:"Notifications", value:"Email, Push", chart:[0,0,0,0]},
    {title:"Theme", value:"Light/Dark", chart:[0,0,0,0]}
];

// --- Render with charts ---
function renderCards(containerId, data){
    const container = document.getElementById(containerId);
    container.innerHTML="";
    data.forEach((item,i)=>{
        const card=document.createElement("div");
        card.className="card";
        card.innerHTML=`<h3>${item.title}</h3>
            <p>${item.value}</p>
            <canvas id="${containerId+i}Chart"></canvas>
            <button class="btn" onclick="editCard(this)">Edit</button>
            <button class="btn" onclick="deleteCard('${containerId}',${i})">Delete</button>`;
        container.appendChild(card);

        // mini chart
        new Chart(document.getElementById(containerId+i+"Chart").getContext('2d'),{
            type:'line',
            data:{labels:['Mon','Tue','Wed','Thu','Fri'], datasets:[{data:item.chart,borderColor:'#3b82f6',backgroundColor:'rgba(59,130,246,0.2)',fill:true,pointRadius:0}]},
            options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},elements:{line:{tension:0.4}}}
        });
    });
}

// --- Save / Delete / Add ---
function saveAllData(){
    localStorage.setItem('overviewData', JSON.stringify(overviewData));
    localStorage.setItem('analyticsData', JSON.stringify(analyticsData));
    localStorage.setItem('projectsData', JSON.stringify(projectsData));
    localStorage.setItem('reportsData', JSON.stringify(reportsData));
    localStorage.setItem('usersData', JSON.stringify(usersData));
    localStorage.setItem('settingsData', JSON.stringify(settingsData));
    renderAll();
}
function addOverviewCard(){overviewData.push({title:"New Widget",value:"0",chart:[0,0,0,0]});pushNotification("Added overview widget");saveAllData();}
function addAnalyticsCard(){analyticsData.push({title:"New Analytics",value:"0",chart:[0,0,0,0]});pushNotification("Added analytics widget");saveAllData();}
function addProject(){projectsData.push({title:"New Project",value:"0% Complete",chart:[0,0,0,0]});pushNotification("Added project");saveAllData();}
function addReport(){reportsData.push({title:"New Report",value:"Owner: Unknown",chart:[0,0,0,0]});pushNotification("Added report");saveAllData();}
function addUser(){usersData.push({title:"New User",value:"Role",chart:[0,0,0,0]});pushNotification("Added user");saveAllData();}
function addSettingsCard(){settingsData.push({title:"New Setting",value:"Value",chart:[0,0,0,0]});pushNotification("Added setting");saveAllData();}
function deleteCard(containerId,index){
    if(containerId==='overviewContainer') overviewData.splice(index,1);
    if(containerId==='analyticsContainer') analyticsData.splice(index,1);
    if(containerId==='projectsContainer') projectsData.splice(index,1);
    if(containerId==='reportsContainer') reportsData.splice(index,1);
    if(containerId==='usersContainer') usersData.splice(index,1);
    if(containerId==='settingsContainer') settingsData.splice(index,1);
    pushNotification("Deleted item from "+containerId);
    saveAllData();
}

// --- Initial render ---
function renderAll(){
    renderCards('overviewContainer',overviewData);
    renderCards('analyticsContainer',analyticsData);
    renderCards('projectsContainer',projectsData);
    renderCards('reportsContainer',reportsData);
    renderCards('usersContainer',usersData);
    renderCards('settingsContainer',settingsData);
}
renderAll();
</script>

</body>
</html>
